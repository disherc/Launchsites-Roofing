<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO & BRANDING -->
    <title>LaunchSites - #1 Roofing Website Builder</title>
    <meta name="description" content="Exclusive Website Licensing for Roofing Contractors. Claim your territory and dominate your local market with our AI-optimized, high-conversion websites.">
    <meta name="keywords" content="roofing website, contractor marketing, lead generation, web design for roofers, launchsites">
    <meta name="author" content="LaunchSites Agency">

    <!-- SOCIAL SHARING (Open Graph) -->
    <meta property="og:title" content="LaunchSites - Territory Application">
    <meta property="og:description" content="Exclusive Website Licensing for Roofing Contractors. Only 1 license available per city.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://launchsites.ca">
    <meta property="og:image" content="https://images.unsplash.com/photo-1632759145351-1d592919f522?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80">

    <!-- FAVICON (Rocket Icon) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ea580c' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z'/><path d='m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z'/><path d='M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0'/><path d='M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5'/></svg>">

    <!-- 1. LOAD STYLES -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .animate-fadeIn { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>

    <!-- 2. LOAD REACT LIBRARIES -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 3. EMAILJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <!-- 4. FIREBASE SETUP (Module Script) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Expose to window so React can access it
        window.firebaseModules = { 
            initializeApp, getAuth, signInAnonymously, onAuthStateChanged, 
            getFirestore, collection, addDoc, serverTimestamp 
        };
    </script>

    <!-- 5. REACT APPLICATION LOGIC -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- INLINE ICONS ---
        const Icons = {
            CheckCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            MapPin: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            ArrowRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>,
            Shield: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
            Globe: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>,
            Smartphone: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></svg>,
            Clock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            Lock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>,
            Layout: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg>,
            MousePointer: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/><path d="m13 13 6 6"/></svg>,
            Phone: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
            ShieldCheck: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>,
            Hammer: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9"/><path d="M17.64 15 22 10.64"/><path d="m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25V2.75l-8.75 3.75h2c.85 0 1.65.33 2.25.93l1.25 1.25L17.64 15z"/></svg>,
            Home: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            Star: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
            Menu: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>,
            X: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 18 18"/></svg>,
            ChevronRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>,
            ExternalLink: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>,
            Eye: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>,
            Server: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="8" x="2" y="2" rx="2" ry="2"/><rect width="20" height="8" x="2" y="14" rx="2" ry="2"/><line x1="6" x2="6.01" y1="6" y2="6"/><line x1="6" x2="6.01" y1="18" y2="18"/></svg>,
            Bot: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>,
            Sparkles: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5h4"/></svg>,
            XCircle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>,
            AlertTriangle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></svg>,
            Check: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 6 9 17l-5-5"/></svg>,
            Zap: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
            Tag: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"/><path d="M7 7h.01"/></svg>,
            TrendingUp: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>,
            Loader2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>,
            Mail: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>,
            User: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
            CreditCard: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>,
            Rocket: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>
        };
        
        // Destructure icons from our local Icons object for ease of use
        const { 
            CheckCircle, MapPin, ArrowRight, Shield, Globe, Smartphone, Clock, Lock, Layout, 
            MousePointer, Phone, ShieldCheck, Hammer, Home, Star, Menu, X, ChevronRight, 
            ExternalLink, Eye, Server, Bot, Sparkles, XCircle, AlertTriangle, Check, Zap, 
            Tag, TrendingUp, Loader2, Mail, User, CreditCard, Rocket 
        } = Icons;

        // --- BRANDING COMPONENT ---
        const LaunchsitesLogo = ({ light = false }) => (
            <div className="flex items-center gap-2">
                <div className={`p-1.5 rounded-lg ${light ? 'bg-orange-500' : 'bg-orange-600'}`}>
                <Rocket className="w-5 h-5 text-white fill-white" />
                </div>
                <span className={`font-black text-xl tracking-tight ${light ? 'text-white' : 'text-slate-900'}`}>
                Launch<span className={light ? 'text-orange-400' : 'text-orange-600'}>sites</span>
                </span>
            </div>
        );

        // --- MODAL COMPONENT (FOR TOS/PRIVACY) ---
        const Modal = ({ isOpen, onClose, title, content }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 z-[100] flex items-center justify-center p-4">
                    <div className="bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-2xl">
                        <div className="p-6 border-b flex justify-between items-center sticky top-0 bg-white">
                            <h3 className="text-xl font-bold">{title}</h3>
                            <button onClick={onClose}><X className="w-6 h-6"/></button>
                        </div>
                        <div className="p-6 whitespace-pre-wrap text-sm text-gray-600">
                            {content}
                        </div>
                    </div>
                </div>
            );
        };

        // --- LEGAL CONTENT ---
        const TERMS_CONTENT = `TERMS OF SERVICE

1. Acceptance of Terms
By accessing LaunchSites, you agree to be bound by these Terms of Service.

2. Services Provided
LaunchSites provides website design and hosting services for roofing contractors. Services include template customization, hosting setup, and domain connection.

3. Payments
A one-time setup fee is charged to initiate the project. A monthly recurring fee is charged for hosting, SSL, and maintenance.

4. Termination
You may cancel your monthly subscription at any time. Upon cancellation, your website hosting will be terminated at the end of the billing cycle.

5. Intellectual Property
The website design template remains the property of LaunchSites until the setup fee is paid in full.`;

        const PRIVACY_CONTENT = `PRIVACY POLICY

1. Information Collection
We collect personal information such as name, email, phone number, and business details to provide our services.

2. Use of Information
Your information is used to:
- Build and customize your website.
- Process payments.
- Communicate regarding your project.

3. Data Protection
We implement security measures to maintain the safety of your personal information. We do not sell your data to third parties.

4. Contact
For any privacy concerns, please contact support@launchsites.ca.`;


        // --- TEMPLATE COMPONENT ---
        const RoofingTemplate = ({ onClose, customData, territoryCity }) => {
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            
            const getDisplayCity = () => {
                if (customData.city && customData.city.length > 2) return customData.city;
                const addr = customData.address;
                if (!addr) return territoryCity;
                if (addr.includes(',')) {
                    const parts = addr.split(',');
                    return parts.length >= 2 ? parts[1].trim() : territoryCity;
                }
                if (!/\d/.test(addr) && addr.length < 30 && addr.length > 2) {
                    return addr;
                }
                return territoryCity;
            };

            const displayCity = getDisplayCity();

            const getMapUrl = () => {
                if (customData.googleMapLink && customData.googleMapLink.length > 10) {
                    return customData.googleMapLink; 
                }
                const query = customData.address ? `${customData.address} Canada` : `${displayCity}, Canada`;
                return `https://maps.google.com/maps?q=${encodeURIComponent(query)}&t=&z=13&ie=UTF8&iwloc=&output=embed`;
            };

            const mapUrl = getMapUrl();

            const DATA = { 
                businessName: customData.businessName || `Apex Roofing ${displayCity}`,
                phone: customData.phone || "(555) 123-4567",
                address: customData.address || `123 Roofing Lane, ${displayCity}`,
                primaryColor: customData.primaryColor || "bg-red-700",
                city: displayCity
            };

            const btnClass = `w-full ${DATA.primaryColor} text-white font-black text-xl py-4 rounded shadow-lg transform active:scale-95 transition-all hover:opacity-90`;
            const headerClass = `inline-block ${DATA.primaryColor} text-white font-bold px-3 py-1 mb-4 text-sm uppercase tracking-wide rounded-sm`;
            const dividerClass = `w-20 h-1 ${DATA.primaryColor} mx-auto rounded`;

            return (
                <div className="font-sans text-gray-900 bg-white relative h-screen overflow-y-auto animate-fadeIn">
                {/* DEMO HEADER */}
                <div className="sticky top-0 left-0 w-full bg-slate-900 text-white z-[100] py-3 px-4 flex justify-between items-center shadow-xl border-b border-gray-700">
                    <div className="flex items-center">
                        <LaunchsitesLogo light={true} />
                        <div className="h-6 w-px bg-slate-700 mx-4 hidden md:block"></div>
                        <span className="hidden md:inline text-sm text-gray-400">Template Generated for: <b>{DATA.businessName}</b></span>
                    </div>
                    <div className="flex items-center space-x-4">
                        <span className="text-xs text-green-400 hidden sm:block font-bold tracking-wide uppercase"><CheckCircle className="w-3 h-3 inline mr-1"/> Validated</span>
                        <button onClick={onClose} className="bg-white hover:bg-gray-100 text-slate-900 px-6 py-2 rounded-full font-bold text-sm flex items-center transition-all transform hover:scale-105 shadow-lg">
                            <XCircle className="w-4 h-4 mr-2"/> Close Preview
                        </button>
                    </div>
                </div>

                <a href={`tel:${DATA.phone}`} className="fixed bottom-6 right-6 z-50 bg-green-600 text-white p-4 rounded-full shadow-[0_4px_14px_0_rgba(22,163,74,0.39)] md:hidden hover:bg-green-700 transition-all active:scale-90 flex items-center justify-center border-2 border-white" aria-label="Call Now">
                    <Phone className="w-8 h-8 fill-current animate-pulse" />
                </a>
                
                <div className="bg-gray-900 text-white py-2 text-sm hidden md:block">
                    <div className="max-w-7xl mx-auto px-4 flex justify-between items-center">
                    <div className="flex items-center space-x-6">
                        <span className="flex items-center"><ShieldCheck className="w-4 h-4 mr-1 text-red-500"/> Licensed & Insured</span>
                        <span className="flex items-center"><Clock className="w-4 h-4 mr-1 text-red-500"/> 24/7 Emergency Service</span>
                    </div>
                    <div className="flex items-center font-bold text-red-500 animate-pulse">STORM DAMAGE SPECIALISTS</div>
                    </div>
                </div>

                <nav className="sticky top-[60px] w-full bg-white shadow-md z-40">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex justify-between items-center h-20">
                        <div className="flex items-center">
                        <div className={`w-10 h-10 ${DATA.primaryColor} rounded flex items-center justify-center mr-2 shadow-md text-white`}>
                            <Home className="w-6 h-6" />
                        </div>
                        <div>
                            <span className="block font-black text-xl tracking-tighter leading-none text-gray-900 uppercase">{DATA.businessName}</span>
                            <span className="block text-xs font-bold text-gray-500 tracking-widest uppercase">Trusted since 2005</span>
                        </div>
                        </div>
                        <div className="hidden md:flex items-center space-x-8">
                        <a href="#" className="font-bold text-gray-700 hover:text-red-600">Residential</a>
                        <a href="#" className="font-bold text-gray-700 hover:text-red-600">Commercial</a>
                        <a href={`tel:${DATA.phone}`} className={`flex items-center ${DATA.primaryColor} text-white px-6 py-3 rounded font-black text-lg hover:opacity-90 transition-colors shadow-lg`}>
                            <Phone className="w-5 h-5 mr-2 fill-current" /> {DATA.phone}
                        </a>
                        </div>
                    </div>
                    </div>
                </nav>

                <div className="relative bg-gray-900">
                    <div className="absolute inset-0 bg-gray-800 overflow-hidden">
                    <div className="absolute inset-0 opacity-40 bg-[url('https://images.unsplash.com/photo-1632759145351-1d592919f522?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80')] bg-cover bg-center"></div>
                    <div className="absolute inset-0 bg-gradient-to-r from-gray-900 via-gray-900/80 to-transparent"></div>
                    </div>
                    <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 lg:py-32 grid md:grid-cols-2 gap-12 items-center">
                    <div className="text-white">
                        <div className={headerClass}>
                        #1 Rated in {DATA.city}
                        </div>
                        <h1 className="text-4xl md:text-6xl font-extrabold leading-tight mb-6">
                        Need A New Roof? <br/>
                        <span className="text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400">We Build It To Last.</span>
                        </h1>
                        <p className="text-lg text-gray-300 mb-8 leading-relaxed max-w-lg">
                        Get a free, honest inspection from {DATA.city}'s most trusted team. 50-Year Warranty available.
                        </p>
                        <div className="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                        <div className="flex items-center text-white font-bold"><CheckCircle className="w-4 h-4 text-white"/> Financing Available</div>
                        <div className="flex items-center text-white font-bold"><CheckCircle className="w-4 h-4 text-white"/> Licensed & Bonded</div>
                        </div>
                    </div>

                    <div className={`bg-white rounded-lg p-8 shadow-2xl border-t-8 ${DATA.primaryColor.replace('bg-', 'border-')}`}>
                        <h3 className="text-2xl font-black text-gray-900 mb-2 text-center">Get Your Free Estimate</h3>
                        <p className="text-gray-500 text-center mb-6 text-sm">Fast response. No obligation.</p>
                        <div className="space-y-4">
                        <div>
                            <label className="block text-sm font-bold text-gray-700 mb-1">What do you need?</label>
                            <select className="w-full border-2 border-gray-200 p-3 rounded font-medium focus:border-red-600 focus:outline-none">
                            <option>Roof Replacement</option>
                            <option>Leak Repair</option>
                            </select>
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                            <input type="text" placeholder="Name" className="w-full border-2 border-gray-200 p-3 rounded font-medium focus:border-red-600 focus:outline-none" />
                            <input type="text" placeholder="Phone" className="w-full border-2 border-gray-200 p-3 rounded font-medium focus:border-red-600 focus:outline-none" />
                        </div>
                        <button className={btnClass}>
                            GET MY FREE QUOTE
                        </button>
                        </div>
                    </div>
                    </div>
                </div>

                {/* --- Services Section --- */}
                <div className="py-20 bg-white">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="text-center mb-16">
                        <h2 className="text-4xl font-black text-gray-900 mb-4">Our Roofing Services</h2>
                        <div className={dividerClass}></div>
                    </div>
                    <div className="grid md:grid-cols-3 gap-8">
                        <div className="group bg-white border border-gray-100 rounded-xl shadow-lg hover:shadow-2xl transition-all p-8">
                            <div className={`w-12 h-12 ${DATA.primaryColor.replace('bg-', 'text-').replace('700', '100').replace('text-white','bg-opacity-10')} rounded-full flex items-center justify-center mb-6`}>
                                <Home className={`w-6 h-6 ${DATA.primaryColor.replace('bg-', 'text-').replace('text-white', '')}`} />
                            </div>
                            <h3 className="text-xl font-bold mb-3">Full Roof Replacement</h3>
                            <p className="text-gray-600 mb-4">Protect your home with a complete tear-off and replacement.</p>
                        </div>
                        <div className="group bg-white border border-gray-100 rounded-xl shadow-lg hover:shadow-2xl transition-all p-8">
                            <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-6">
                            <Hammer className="w-6 h-6 text-blue-600" />
                            </div>
                            <h3 className="text-xl font-bold mb-3">Leak Detection</h3>
                            <p className="text-gray-600 mb-4">We find leaks fast before they ruin your drywall.</p>
                        </div>
                        <div className="group bg-white border border-gray-100 rounded-xl shadow-lg hover:shadow-2xl transition-all p-8">
                            <div className="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mb-6">
                            <ShieldCheck className="w-6 h-6 text-yellow-600" />
                            </div>
                            <h3 className="text-xl font-bold mb-3">Storm Damage</h3>
                            <p className="text-gray-600 mb-4">We work with your insurance to handle hail claims.</p>
                        </div>
                    </div>
                    </div>
                </div>

                {/* --- Google Map & Location --- */}
                <div className="bg-gray-50 py-20 border-t border-gray-200">
                    <div className="max-w-7xl mx-auto px-4 grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 className="text-3xl font-black text-gray-900 mb-6">Proudly Serving {DATA.city}</h2>
                        <div className="space-y-4">
                        <div className="flex items-start"><MapPin className="w-6 h-6 text-red-600 mr-4 flex-shrink-0" /><div><h4 className="font-bold text-gray-900">Our Office</h4><p className="text-gray-600">{DATA.address}</p></div></div>
                        </div>
                    </div>
                    <div className="bg-white p-2 rounded-xl shadow-lg border border-gray-200 h-64 md:h-96">
                        <iframe src={mapUrl} width="100%" height="100%" style={{border:0, borderRadius: '0.75rem'}} allowFullScreen="" loading="lazy" title="Google Map Location"></iframe>
                    </div>
                    </div>
                </div>

                <footer className="bg-gray-900 text-gray-400 py-16 border-t border-gray-800 text-sm">
                    <div className="max-w-7xl mx-auto px-4 text-center">
                    <p className="mb-4 text-xl text-white font-bold">{DATA.businessName}</p>
                    <p>© {new Date().getFullYear()} {DATA.businessName}. All rights reserved.</p>
                    </div>
                </footer>
                </div>
            );
        };

        // --- SALES PAGE COMPONENT ---
        const FullSalesPageWithStack = () => {
            const [city, setCity] = useState("Calgary"); 
            const [viewMode, setViewMode] = useState('sales'); 
            const [formStep, setFormStep] = useState(1);
            const [submissionStatus, setSubmissionStatus] = useState("Initializing...");
            const [submitError, setSubmitError] = useState("");
            
            // MODAL STATE
            const [isTermsOpen, setIsTermsOpen] = useState(false);
            const [isPrivacyOpen, setIsPrivacyOpen] = useState(false);

            const [formData, setFormData] = useState({
                businessName: '', phone: '', email: '', address: '', city: 'Calgary', googleMapLink: '',
                services: { residential: true, commercial: false, repair: true, gutters: false },
                primaryColor: 'bg-red-700'
            });

            const [user, setUser] = useState(null);

            // --- 0. SEO: UPDATE PAGE TITLE DYNAMICALLY ---
            useEffect(() => {
                document.title = `Attention ${city} Roofers | LaunchSites`;
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.setAttribute("content", `Dominate the ${city} roofing market with a pre-built, high-conversion website. Only 1 license available per city.`);
                }
            }, [city]);

            // --- 1. INIT EMAILJS & FIREBASE (SAFE) ---
            useEffect(() => {
                if (window.emailjs) {
                    // Replace with your public key if not using variables
                    window.emailjs.init("A8840285-9551-497b-b9a9-2d6a27c78250"); 
                }
                
                // Init Firebase Auth if available
                if (window.firebaseModules && window.firebaseModules.getAuth) {
                    try {
                        const auth = window.firebaseModules.getAuth();
                        window.firebaseModules.signInAnonymously(auth).then(() => setUser(true)).catch(e => console.log(e));
                    } catch(e) { console.log("Firebase Auth skipped"); }
                }
                
                // --- URL PARAMETER HANDLING ---
                const params = new URLSearchParams(window.location.search);
                if (params.get('city')) {
                    setCity(params.get('city'));
                    if (params.get('mode') !== 'view') {
                        setFormData(prev => ({ ...prev, city: params.get('city') }));
                    }
                } else {
                    // GEO-LOCATION FALLBACK
                    fetch('https://ipapi.co/json/')
                        .then(res => res.json())
                        .then(data => {
                            if (data && data.city) {
                                setCity(data.city);
                                setFormData(prev => ({ ...prev, city: data.city }));
                            }
                        })
                        .catch(err => console.log("Geo-location failed, using default"));
                }

                if (params.get('mode') === 'view' && params.get('businessName')) {
                    setFormData({
                        businessName: params.get('businessName') || '',
                        phone: params.get('phone') || '',
                        email: params.get('email') || '',
                        address: params.get('address') || '',
                        city: params.get('formCity') || params.get('city') || 'Calgary',
                        googleMapLink: params.get('googleMapLink') || '',
                        services: JSON.parse(params.get('services') || '{}'),
                        primaryColor: params.get('color') || 'bg-red-700'
                    });
                    setViewMode('demo'); 
                }
            }, []);

            const handleInputChange = (e) => setFormData({...formData, [e.target.name]: e.target.value});
            const handleColorSelect = (colorClass) => setFormData({...formData, primaryColor: colorClass});

            const handleSecureSite = async () => {
                setViewMode('processing');
                setSubmissionStatus("Generating Magic Link...");
                setSubmitError("");
                
                const params = new URLSearchParams({
                    mode: 'view',
                    city: city, 
                    formCity: formData.city,
                    businessName: formData.businessName,
                    phone: formData.phone,
                    email: formData.email,
                    address: formData.address,
                    color: formData.primaryColor,
                    services: JSON.stringify(formData.services)
                }).toString();
                
                const baseUrl = window.location.href.split('?')[0];
                const magicLink = `${baseUrl}?${params}`;

                try {
                    setSubmissionStatus("Sending Email Notification...");
                    
                    const emailData = {
                        access_key: "a8840285-9551-497b-b9a9-2d6a27c78250", 
                        subject: `NEW ORDER: ${formData.city || city} - ${formData.businessName}`,
                        from_name: "LaunchSites",
                        email: formData.email, // Reply-To
                        replyto: formData.email, 
                        message: `NEW SITE APPLICATION RECEIVED\n\nCLIENT DETAILS:\nCity: ${formData.city || city}\nBusiness: ${formData.businessName}\nPhone: ${formData.phone}\nEmail: ${formData.email}\nAddress: ${formData.address}\n\nMAGIC PREVIEW LINK:\n${magicLink}\n\nACTION REQUIRED:\n1. Reply to client.\n2. Confirm details.\n3. Send invoice.`
                    };
                    
                    await fetch("https://api.web3forms.com/submit", {
                        method: "POST",
                        headers: { "Content-Type": "application/json", Accept: "application/json" },
                        body: JSON.stringify(emailData),
                    });

                    if (window.firebaseModules && window.firebaseModules.getFirestore) {
                        try {
                            const { collection, addDoc, serverTimestamp, getFirestore } = window.firebaseModules;
                            const db = getFirestore();
                            await addDoc(collection(db, 'leads'), {
                                ...formData, city, magicLink, submittedAt: serverTimestamp(), status: 'new'
                            });
                        } catch (e) { console.log("DB save skipped"); }
                    }
                    
                    setTimeout(() => { setViewMode('success'); }, 1500);

                } catch (error) {
                    console.error("Critical Error:", error);
                    setSubmitError("Network Error. Please try again.");
                    setTimeout(() => setViewMode('success'), 2000); 
                }
            };

            // --- INSTANT TEST DRIVE BUTTON HANDLER ---
            const handleTestDrive = () => {
                // Pre-fill with generic data for the city
                setFormData({
                    businessName: `Roofing Experts ${city}`,
                    phone: '(555) 000-0000',
                    email: '',
                    address: `${city}, Canada`,
                    city: city,
                    googleMapLink: '',
                    services: { residential: true, commercial: false, repair: true, gutters: false },
                    primaryColor: 'bg-red-700'
                });
                setViewMode('demo');
            };

            if (viewMode === 'demo') return <RoofingTemplate city={city} onClose={() => setViewMode('sales')} customData={formData} territoryCity={city} />; 
            
            if (viewMode === 'success') {
                return (
                    <div className="min-h-screen bg-slate-900 flex items-center justify-center p-4 font-sans">
                        <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-lg w-full text-center animate-fadeIn">
                            <div className="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6"><Check className="w-12 h-12 text-green-600" /></div>
                            <h2 className="text-3xl font-black text-slate-900 mb-2">Step 1 Complete!</h2>
                            <p className="text-slate-600 mb-6">Our developers are now configuring your domain and finalizing your site.</p>
                            <div className="bg-blue-50 border border-blue-100 p-6 rounded-lg mb-8 text-left space-y-4">
                                <div className="flex items-start"><Mail className="w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"/><div><h4 className="font-bold text-blue-900">Check Your Email</h4><p className="text-sm text-blue-700">We have sent a confirmation receipt to <b>{formData.email}</b>.</p></div></div>
                                <div className="flex items-start"><Server className="w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"/><div><h4 className="font-bold text-blue-900">What Happens Next?</h4><p className="text-sm text-blue-700">Within 24 hours, we will send you a <b>Live Preview Link</b>. Once you approve it, we handle the billing and go live instantly.</p></div></div>
                            </div>
                            <button onClick={() => setViewMode('demo')} className="w-full bg-orange-600 hover:bg-orange-700 text-white font-black text-xl py-4 rounded-lg shadow-lg flex items-center justify-center transform hover:scale-[1.02] transition-all">PREVIEW YOUR SITE <ArrowRight className="ml-2 w-6 h-6"/></button>
                        </div>
                    </div>
                )
            }

            if (viewMode === 'processing') {
                return (
                    <div className="min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4 font-sans text-white">
                        <Loader2 className="w-16 h-16 text-orange-600 animate-spin mb-6" />
                        <h2 className="text-2xl font-bold mb-2">Submitting Application...</h2>
                        <div className="text-slate-400 text-sm space-y-2 text-center animate-pulse"><p>{submissionStatus}</p></div>
                    </div>
                )
            }

            return (
                <div className="min-h-screen bg-slate-50 font-sans selection:bg-orange-200 selection:text-orange-900">
                    <div className="bg-white border-b border-gray-100 py-4 shadow-sm sticky top-0 z-50">
                        <div className="max-w-6xl mx-auto px-4 flex justify-between items-center">
                            <LaunchsitesLogo />
                            <button className="text-sm font-bold text-slate-500 hover:text-orange-600 transition-colors" onClick={() => window.open('mailto:support@launchsites.ca')}>Contact Support</button>
                        </div>
                    </div>

                    <div className="bg-orange-600 text-white text-center py-3 text-sm font-bold px-4 shadow-md sticky top-[72px] z-40">
                        <div className="flex items-center justify-center animate-pulse"><AlertTriangle className="w-4 h-4 mr-2 text-white" fill="currentColor" stroke="none" /><span>Attention {city.toUpperCase()} Roofers</span></div>
                    </div>

                    <div className="bg-slate-900 text-white pt-16 pb-40 relative overflow-hidden">
                        <div className="absolute inset-0 opacity-10" style={{backgroundImage: 'radial-gradient(#ffffff 1px, transparent 1px)', backgroundSize: '30px 30px'}}></div>
                        <div className="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-16 items-center relative z-10">
                            <div>
                                <div className="inline-flex items-center bg-slate-800 border border-slate-700 rounded px-4 py-2 mb-8 shadow-sm"><span className="w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"></span><span className="text-xs font-bold text-slate-300 uppercase tracking-widest">Current Status: <span className="text-white">ACCEPTING NEW CLIENTS</span></span></div>
                                <h1 className="text-5xl md:text-7xl font-black leading-[1.1] mb-6 tracking-tight">Attention <span className="text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-yellow-500">{city}</span> Roofers</h1>
                                <h2 className="text-2xl md:text-3xl font-bold text-slate-300 mb-6">We build websites that will help you dominate the <span className="text-orange-500">{city}</span> market.</h2>
                                <p className="text-xl text-slate-400 mb-8 max-w-lg leading-relaxed border-l-4 border-orange-600 pl-6">Fill out the form below to claim the only SEO/GEO optimized site optimized for roofing companies in {city}.</p>
                                <div className="flex items-center mb-8"><span className="bg-green-500 text-black text-xs font-bold px-3 py-1 rounded-full animate-pulse mr-3">LIVE</span> <p className="text-lg font-bold text-green-400">Go live in 24hrs!</p></div>
                            </div>
                            <div className="relative group perspective-1000">
                                <div className="absolute -inset-4 bg-orange-600/30 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                                <div className="relative bg-white rounded-xl shadow-[0_30px_60px_-15px_rgba(0,0,0,0.5)] overflow-hidden border-8 border-slate-800 transform rotate-1 group-hover:rotate-0 transition-all duration-500">
                                    <div className="bg-slate-100 border-b p-3 flex space-x-2 items-center"><div className="flex space-x-1.5"><div className="w-3 h-3 bg-red-500 rounded-full"></div><div className="w-3 h-3 bg-yellow-500 rounded-full"></div><div className="w-3 h-3 bg-green-500 rounded-full"></div></div><div className="bg-white px-3 py-1 rounded-md text-xs font-mono text-slate-400 flex-1 text-center shadow-sm">apexroofing-{city.toLowerCase()}.com</div></div>
                                    <div className="relative aspect-[4/3] bg-slate-50 group-hover:bg-slate-100 transition-colors">
                                        <img src="https://images.unsplash.com/photo-1632759145351-1d592919f522?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" className="w-full h-full object-cover opacity-90" alt="Roofing Site" />
                                        <div className="absolute inset-0 bg-slate-900/60 flex flex-col items-center justify-center opacity-100 backdrop-blur-[2px] group-hover:backdrop-blur-none transition-all">
                                            <p className="text-white font-bold mb-4 uppercase tracking-widest text-xs">Click to interact</p>
                                            <button onClick={handleTestDrive} className="bg-orange-600 hover:bg-orange-500 text-white px-10 py-4 rounded-full font-black shadow-[0_0_20px_rgba(234,88,12,0.5)] flex items-center transform hover:scale-110 transition-all border-4 border-white/20"><Eye className="w-6 h-6 mr-2"/> TEST DRIVE SITE</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-4xl mx-auto px-4 -mt-32 relative z-30">
                        <div className="bg-white rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.2)] border-2 border-slate-100 overflow-hidden relative z-20">
                            <div className="bg-slate-50 border-b border-slate-200 p-6 flex justify-between items-center">
                                <div><h2 className="text-xl font-black text-slate-900 uppercase tracking-tight flex items-center"><Lock className="w-5 h-5 mr-2 text-orange-600"/> Site Application</h2><p className="text-slate-500 text-xs font-bold uppercase tracking-wider mt-1">Status: <span className="text-green-600">Open</span> • Region: {city}</p></div>
                                <div className="text-right hidden sm:block"><div className="text-xs text-slate-400 font-bold uppercase">Step {formStep} of 4</div><div className="flex space-x-1 mt-1">{[1,2,3,4].map(step => (<div key={step} className={`h-1.5 w-6 rounded-full transition-colors ${formStep >= step ? 'bg-orange-600' : 'bg-gray-200'}`}></div>))}</div></div>
                            </div>
                            <div className="p-8">
                                {formStep === 1 && (<div className="space-y-5 animate-fadeIn"><h3 className="text-lg font-bold text-slate-800">1. Verify Business Eligibility</h3><div><label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Legal Company Name</label><input name="businessName" onChange={handleInputChange} value={formData.businessName} type="text" className="w-full border-2 border-slate-200 p-3 rounded font-medium focus:border-orange-500 focus:ring-0 outline-none transition-colors" placeholder="e.g. Apex Roofing Ltd" /></div><div className="grid grid-cols-2 gap-4"><div><label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Phone Number</label><input name="phone" onChange={handleInputChange} value={formData.phone} type="text" className="w-full border-2 border-slate-200 p-3 rounded font-medium focus:border-orange-500 focus:ring-0 outline-none transition-colors" placeholder="(555) 123-4567" /></div><div><label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Email Address</label><input name="email" onChange={handleInputChange} value={formData.email} type="email" className="w-full border-2 border-slate-200 p-3 rounded font-medium focus:border-orange-500 focus:ring-0 outline-none transition-colors" placeholder="owner@example.com" /></div></div><button onClick={() => setFormStep(2)} className="w-full bg-slate-900 text-white font-bold py-4 rounded hover:bg-slate-800 flex justify-center items-center shadow-lg transform active:scale-95 transition-all">Next Step <ArrowRight className="ml-2 w-5 h-5"/></button></div>)}
                                {formStep === 2 && (<div className="space-y-5 animate-fadeIn"><h3 className="text-lg font-bold text-slate-800">2. Local SEO Data</h3><div className="bg-blue-50 border border-blue-100 p-3 rounded text-sm text-blue-800 flex items-start"><Globe className="w-4 h-4 mr-2 mt-0.5 flex-shrink-0"/>We use this exact address to rank you in the Google Map Pack.</div><div><label className="text-xs font-bold text-slate-500 uppercase mb-1 block">City / Territory</label><input name="city" onChange={handleInputChange} value={formData.city} type="text" placeholder="e.g. Fort McMurray" className="w-full border-2 border-slate-200 p-3 rounded font-medium focus:border-orange-500 focus:ring-0 outline-none transition-colors" /></div><div><label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Physical Address</label><input name="address" onChange={handleInputChange} value={formData.address} type="text" placeholder={`123 Main St`} className="w-full border-2 border-slate-200 p-3 rounded font-medium focus:border-orange-500 focus:ring-0 outline-none transition-colors" /></div><div className="flex space-x-3 pt-2"><button onClick={() => setFormStep(1)} className="w-1/3 bg-gray-100 text-slate-600 font-bold py-3 rounded hover:bg-gray-200">Back</button><button onClick={() => setFormStep(3)} className="w-2/3 bg-slate-900 text-white font-bold py-3 rounded flex justify-center items-center hover:bg-slate-800">Next Step <ArrowRight className="ml-2 w-5 h-5"/></button></div></div>)}
                                {formStep === 3 && (<div className="space-y-5 animate-fadeIn"><h3 className="text-lg font-bold text-slate-800">3. Site Configuration</h3><div className="grid grid-cols-2 gap-3 mb-2"><div className="border-2 border-slate-200 p-3 rounded flex items-center hover:border-orange-500 cursor-pointer bg-slate-50"><input type="checkbox" checked readOnly className="mr-3 w-5 h-5 accent-orange-600"/> Residential</div><div className="border-2 border-slate-200 p-3 rounded flex items-center hover:border-orange-500 cursor-pointer bg-slate-50"><input type="checkbox" className="mr-3 w-5 h-5 accent-orange-600"/> Commercial</div></div><div><label className="text-xs font-bold text-slate-500 uppercase mb-2 block">Select Brand Color</label><div className="flex space-x-4"><div onClick={() => handleColorSelect('bg-red-700')} className={`w-10 h-10 rounded-full bg-red-700 ring-2 ring-offset-1 cursor-pointer ${formData.primaryColor === 'bg-red-700' ? 'ring-slate-900 scale-110' : 'ring-transparent'}`}></div><div onClick={() => handleColorSelect('bg-blue-700')} className={`w-10 h-10 rounded-full bg-blue-700 ring-2 ring-offset-1 cursor-pointer ${formData.primaryColor === 'bg-blue-700' ? 'ring-slate-900 scale-110' : 'ring-transparent'}`}></div><div onClick={() => handleColorSelect('bg-green-700')} className={`w-10 h-10 rounded-full bg-green-700 ring-2 ring-offset-1 cursor-pointer ${formData.primaryColor === 'bg-green-700' ? 'ring-slate-900 scale-110' : 'ring-transparent'}`}></div><div onClick={() => handleColorSelect('bg-slate-900')} className={`w-10 h-10 rounded-full bg-slate-900 ring-2 ring-offset-1 cursor-pointer ${formData.primaryColor === 'bg-slate-900' ? 'ring-orange-500 scale-110' : 'ring-transparent'}`}></div></div></div><div className="flex space-x-3 pt-2"><button onClick={() => setFormStep(2)} className="w-1/3 bg-gray-100 text-slate-600 font-bold py-3 rounded hover:bg-gray-200">Back</button><button onClick={() => setFormStep(4)} className="w-2/3 bg-green-600 text-white font-bold py-3 rounded flex justify-center items-center shadow-md hover:bg-green-700">Next Step <CheckCircle className="ml-2 w-5 h-5"/></button></div></div>)}
                                {formStep === 4 && (<div className="text-center animate-fadeIn"><div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 border-4 border-green-50 shadow-inner"><Lock className="w-10 h-10 text-green-600" /></div><h3 className="text-2xl font-black text-slate-900 mb-2 uppercase">Activate Your Site Build</h3><p className="text-slate-600 mb-6 text-sm max-w-sm mx-auto">We are currently accepting new projects for this week. Lock in your $1,500 rate before the price increases.</p><div className="bg-slate-50 p-5 rounded-lg border border-slate-200 mb-6 text-left text-sm space-y-3 relative"><div className="absolute top-4 right-4 text-xs font-bold text-slate-400 uppercase tracking-wider">No Payment Required</div><div className="flex justify-between items-center pt-2"><span className="font-bold text-slate-700">Website Setup</span><span className="font-bold">$1,500.00</span></div><div className="flex justify-between items-center text-green-600"><span className="font-bold flex items-center"><Check className="w-3 h-3 mr-1"/> Activation Fee</span><span className="font-bold">WAIVED</span></div><div className="h-px bg-slate-200 my-2"></div><div className="flex justify-between items-center"><span className="font-black text-lg text-slate-900">Total Due Today</span><span className="font-black text-2xl text-green-600 underline decoration-green-300 decoration-4 underline-offset-4">$0.00</span></div><p className="text-xs text-slate-400 mt-2 text-center">We will invoice you <b>after</b> the developer confirms your domain.</p></div><div className="flex space-x-3"><button onClick={() => setFormStep(3)} className="w-1/3 bg-gray-100 text-slate-600 font-bold py-3 rounded hover:bg-gray-200">Back</button><button onClick={handleSecureSite} className="w-2/3 bg-orange-600 hover:bg-orange-700 text-white font-black text-xl py-5 rounded shadow-xl flex items-center justify-center transform hover:scale-[1.02] transition-all">SUBMIT APPLICATION</button></div><div className="flex items-center justify-center space-x-4 mt-4 opacity-50 grayscale"><ShieldCheck className="w-5 h-5"/><span className="text-xs font-bold">256-BIT SSL ENCRYPTED</span></div></div>)}
                            </div>
                        </div>
                    </div>

                    <div className="max-w-6xl mx-auto px-4 py-32">
                        <div className="text-center mb-16"><h2 className="text-4xl font-black text-slate-900 mb-4">Everything You Need To <span className="text-orange-600 underline decoration-orange-300 decoration-4 underline-offset-4">Dominate {city}</span></h2><p className="text-xl text-slate-600 max-w-2xl mx-auto">This isn't a cost. It's an investment that pays for itself with your first booked roof.</p></div>
                        <div className="grid md:grid-cols-12 gap-10">
                            <div className="md:col-span-7 bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden">
                                <div className="bg-slate-900 text-white p-4 font-bold text-lg flex items-center"><Layout className="w-5 h-5 mr-2 text-orange-500"/> SCOPE OF WORK</div>
                                <div className="p-8 space-y-6">
                                    <div className="flex justify-between items-start border-b border-slate-100 pb-4"><div className="flex"><CheckCircle className="w-6 h-6 text-green-500 mr-4 flex-shrink-0"/><div><h4 className="font-bold text-slate-900 text-lg">5-Page High Conversion Website</h4><p className="text-sm text-slate-500 mt-1">Home, Services, About, Gallery, Contact. Built for speed.</p></div></div><div className="font-bold text-slate-400 text-sm">$4,997 Value</div></div>
                                    <div className="flex justify-between items-start border-b border-slate-100 pb-4"><div className="flex"><CheckCircle className="w-6 h-6 text-green-500 mr-4 flex-shrink-0"/><div><h4 className="font-bold text-slate-900 text-lg">Google Map Pack Optimization</h4><p className="text-sm text-slate-500 mt-1">Schema code injection to rank your address in {city}.</p></div></div><div className="font-bold text-slate-400 text-sm">$997 Value</div></div>
                                    <div className="flex justify-between items-start border-b border-slate-100 pb-4"><div className="flex"><CheckCircle className="w-6 h-6 text-green-500 mr-4 flex-shrink-0"/><div><h4 className="font-bold text-slate-900 text-lg">AI Search Protocol</h4><p className="text-sm text-slate-500 mt-1">Optimized for Siri, ChatGPT & Voice Search.</p></div></div><div className="font-bold text-slate-400 text-sm">$497 Value</div></div>
                                    <div className="flex justify-between items-start border-b border-slate-100 pb-4"><div className="flex"><CheckCircle className="w-6 h-6 text-green-500 mr-4 flex-shrink-0"/><div><h4 className="font-bold text-slate-900 text-lg">Secure Hosting & SSL</h4><p className="text-sm text-slate-500 mt-1">Daily backups and hacker protection included.</p></div></div><div className="font-bold text-slate-400 text-sm">$497 Value</div></div>
                                    <div className="flex justify-between items-center pt-2"><span className="font-black text-xl text-slate-900">TOTAL VALUE</span><span className="font-black text-xl text-slate-400 line-through">$6,988.00</span></div>
                                </div>
                            </div>
                            <div className="md:col-span-5 relative">
                                <div className="absolute -top-6 -right-6 z-10"><div className="bg-red-600 text-white font-black text-xl p-6 rounded-full shadow-lg transform rotate-12 flex flex-col items-center justify-center border-4 border-white"><span>50%</span><span className="text-sm">OFF</span></div></div>
                                <div className="bg-slate-900 text-white rounded-2xl shadow-2xl p-8 border border-slate-700 h-full flex flex-col justify-center">
                                    <div className="flex items-center mb-4"><div className="bg-green-500 text-black text-xs font-bold px-2 py-1 rounded mr-2">LAUNCH OFFER</div><p className="text-slate-400 font-bold uppercase tracking-widest text-sm">Ends Soon</p></div>
                                    <div className="mb-2"><span className="text-slate-500 text-2xl line-through mr-3 font-bold">$2,997</span></div>
                                    <div className="flex items-baseline mb-2"><span className="text-6xl font-black text-white">$1,500</span><span className="text-xl text-slate-400 ml-2 font-bold">Today</span></div>
                                    <p className="text-slate-400 font-medium mb-6">+ $50/month for Hosting & Security</p>
                                    <p className="text-green-400 font-bold flex items-center mb-8 bg-green-400/10 p-3 rounded-lg border border-green-400/20"><Zap className="w-5 h-5 mr-2 fill-green-400"/> Priority Site Build</p>
                                    <button onClick={() => window.scrollTo({top: 0, behavior: 'smooth'})} className="w-full bg-orange-600 hover:bg-orange-500 text-white font-black text-xl py-5 rounded-lg shadow-lg flex items-center justify-center transition-all transform hover:scale-[1.02] mb-4">CLAIM {city.toUpperCase()} NOW</button>
                                    <div className="text-center space-y-2"><p className="text-xs text-slate-500">Secure 256-Bit SSL Encrypted Payment</p><p className="text-xs text-slate-500">30-Day 100% Money Back Guarantee</p></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="bg-slate-900 py-20 border-t border-slate-800">
                        <div className="max-w-4xl mx-auto px-4 text-center">
                            <h2 className="text-3xl font-bold text-white mb-8">Stop Losing Leads to Inferior Competitors.</h2>
                            <button onClick={() => window.scrollTo({top: 0, behavior: 'smooth'})} className="bg-orange-600 hover:bg-orange-500 text-white font-black text-2xl px-12 py-6 rounded-full shadow-[0_0_40px_rgba(234,88,12,0.4)] transition-all transform hover:scale-105">CLAIM {city.toUpperCase()} NOW</button>
                        </div>
                    </div>

                    <footer className="bg-white py-12 text-center text-slate-500 text-sm border-t border-slate-100">
                        <div className="flex justify-center mb-6 opacity-50 grayscale hover:grayscale-0 transition-all"><LaunchsitesLogo /></div>
                        <div className="flex justify-center space-x-6 mb-6">
                            <button onClick={() => setIsTermsOpen(true)} className="hover:text-orange-600 transition-colors">Terms of Service</button>
                            <button onClick={() => setIsPrivacyOpen(true)} className="hover:text-orange-600 transition-colors">Privacy Policy</button>
                        </div>
                        <p>© 2025 Launchsites. All rights reserved.</p>
                        <p className="mt-2">This offer is limited to one contractor per city.</p>
                    </footer>
                    
                    {/* MODALS */}
                    <Modal isOpen={isTermsOpen} onClose={() => setIsTermsOpen(false)} title="Terms of Service" content={TERMS_CONTENT} />
                    <Modal isOpen={isPrivacyOpen} onClose={() => setIsPrivacyOpen(false)} title="Privacy Policy" content={PRIVACY_CONTENT} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FullSalesPageWithStack />);
    </script>
</body>
</html>
